<% provide(:user, 'employee') %>

<% if logged_in? %>
<h1>Update Details</h1>
<div class = "row">
  <div class = "col-md-6 float-left">
    <%= form_for(@employee) do |f| %>

      <%= f.label :id ,"Employee Id"%>
      <%= f.text_field :id, :value => ("RP#{@employee.id}"), class: 'form-control',readonly:"readonly" %>
      
      <%= f.label :designation %>
      <%= f.text_field :designation, class: 'form-control',readonly:"readonly" %>

      <%= f.label :email %>
      <%= f.email_field :email, class: 'form-control',readonly:"readonly" %>

      <%= f.label :dateofjoin ,"Date of Join"%>
      <%= f.date_field :dateofjoin, class: 'form-control',readonly:"readonly" %> 

      <%= f.label :username %>
      <%= f.text_field :username, class: 'form-control',readonly:"readonly" %>

      <%= f.label :dateofbirth,"Date of Birth" %>
      <%= f.date_field :dateofbirth, class: 'form-control' %>

      <%= f.label :personalemail,"Personal Email" %>
      <%= f.email_field :personalemail, class: 'form-control' %>

      <%= f.label :image,"Profile Pic"%>
      <%= f.file_field :image,class: 'form-control' %>

      <%= f.submit "Update", class: "btn btn-primary" %>
      <br><br><%= link_to "Cancel", home_path, class: "btn btn-lg btn-primary can" %>
    <% end %>
    
  </div>
  <% if @employee.fb_logged_in.nil? || @employee.fb_logged_in == false %>
  <%= link_to  "Details from facebook", '/auth/facebook' %>
  
  <% else %>
  <%= link_to  "Logout from facebook", edit_employee_path(@employee, logout: true) %>
  <%# debugger %>
  <% end %>

  <% if params['fb'] && @employee.fb_logged_in == true %>
    <div class="col-md-6 float-right">
      
      <%= image_tag @user['picture']['data']['url'].to_s %>
      <%= @user['name'] %><br/>
      <%= @user['email'] %><br/>
      <%= @user['birthday'] %><br/>
      <%= @user['hometown']['name'] %><br/>
      <%= @user['location']['name'] %><br/>
      <%= @user['posts']['data'][0]['message'] || @user['posts']['data'][0]['story'] %>
    </div>
  <% end %>

</div>
<% end %>